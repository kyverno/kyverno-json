---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: policies.json.kyverno.io
spec:
  group: json.kyverno.io
  names:
    kind: Policy
    listKind: PolicyList
    plural: policies
    singular: policy
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              rules:
                description: Rules is a list of Rule instances. A Policy contains
                  multiple rules and each rule can validate, mutate, or generate resources.
                items:
                  properties:
                    context:
                      description: Context defines variables and data sources that
                        can be used during rule execution.
                      items:
                        description: ContextEntry adds variables and data sources
                          to a rule Context.
                        properties:
                          imageRegistry:
                            description: ImageRegistry defines requests to an OCI/Docker
                              V2 registry to fetch image details.
                            properties:
                              imageRegistryCredentials:
                                description: ImageRegistryCredentials provides credentials
                                  that will be used for authentication with registry.
                                properties:
                                  allowInsecureRegistry:
                                    description: AllowInsecureRegistry allows insecure
                                      access to a registry.
                                    type: boolean
                                  providers:
                                    description: 'Providers specifies a list of OCI
                                      Registry names, whose authentication providers
                                      are provided. It can be of one of these values:
                                      AWS, ACR, GCP, GHCR.'
                                    items:
                                      description: ImageRegistryCredentialsProvider
                                        provides the list of credential providers
                                        required.
                                      enum:
                                      - default
                                      - amazon
                                      - azure
                                      - google
                                      - github
                                      type: string
                                    type: array
                                  secrets:
                                    description: Secrets specifies a list of secrets
                                      that are provided for credentials. Secrets must
                                      live in the Kyverno namespace.
                                    items:
                                      type: string
                                    type: array
                                type: object
                              reference:
                                description: 'Reference is image reference to a container
                                  image in the registry. Example: ghcr.io/kyverno/kyverno:latest'
                                type: string
                            required:
                            - reference
                            type: object
                          name:
                            description: Name is the variable name.
                            type: string
                          variable:
                            description: Variable defines an arbitrary JMESPath context
                              variable that can be defined inline.
                            properties:
                              value:
                                description: Value is any arbitrary object.
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                        required:
                        - name
                        type: object
                      type: array
                    exclude:
                      description: Exclude defines when this policy rule should not
                        be applied. The exclude criteria can include resource information
                        (e.g. kind, name, namespace, labels) and admission review
                        request information like the name or role.
                      properties:
                        all:
                          description: All allows specifying resources which will
                            be ANDed.
                          items:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          type: array
                        any:
                          description: Any allows specifying resources which will
                            be ORed.
                          items:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          type: array
                      type: object
                    match:
                      description: Match defines when this policy rule should be applied.
                        The match criteria can include resource information (e.g.
                        kind, name, namespace, labels) and admission review request
                        information like the user name or role. At least one kind
                        is required.
                      properties:
                        all:
                          description: All allows specifying resources which will
                            be ANDed.
                          items:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          type: array
                        any:
                          description: Any allows specifying resources which will
                            be ORed.
                          items:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          type: array
                      type: object
                    name:
                      description: Name is a label to identify the rule, It must be
                        unique within the policy.
                      maxLength: 63
                      type: string
                    validate:
                      description: Validation is used to validate matching resources.
                      properties:
                        assert:
                          description: Assert specifies an overlay-style pattern used
                            to check resources.
                          properties:
                            all:
                              description: All allows specifying resources which will
                                be ANDed.
                              items:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              type: array
                            any:
                              description: Any allows specifying resources which will
                                be ORed.
                              items:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              type: array
                          type: object
                        message:
                          description: Message specifies a custom message to be displayed
                            on failure.
                          type: string
                      type: object
                  required:
                  - name
                  type: object
                type: array
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
